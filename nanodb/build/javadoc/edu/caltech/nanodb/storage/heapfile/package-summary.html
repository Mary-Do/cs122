<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_111) on Wed Jan 18 13:25:15 PST 2017 -->
<title>edu.caltech.nanodb.storage.heapfile (NanoDB)</title>
<meta name="date" content="2017-01-18">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="edu.caltech.nanodb.storage.heapfile (NanoDB)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../edu/caltech/nanodb/storage/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../../../edu/caltech/nanodb/storage/writeahead/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?edu/caltech/nanodb/storage/heapfile/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;edu.caltech.nanodb.storage.heapfile</h1>
<div class="docSummary">
<div class="block">
    This package provides an implementation of the heap file organization for
    NanoDB.</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html" title="class in edu.caltech.nanodb.storage.heapfile">DataPage</a></td>
<td class="colLast">
<div class="block">This class provides the constants and operations necessary for manipulating
 a data page within a heap file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/HeaderPage.html" title="class in edu.caltech.nanodb.storage.heapfile">HeaderPage</a></td>
<td class="colLast">
<div class="block">
 This class contains constants and basic functionality for accessing and
 manipulating the contents of the header page of a heap table-file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/HeapFilePageTuple.html" title="class in edu.caltech.nanodb.storage.heapfile">HeapFilePageTuple</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/HeapTupleFile.html" title="class in edu.caltech.nanodb.storage.heapfile">HeapTupleFile</a></td>
<td class="colLast">
<div class="block">This class implements the TupleFile interface for heap files.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/HeapTupleFileManager.html" title="class in edu.caltech.nanodb.storage.heapfile">HeapTupleFileManager</a></td>
<td class="colLast">
<div class="block">This class provides high-level operations on heap tuple files.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package edu.caltech.nanodb.storage.heapfile Description">Package edu.caltech.nanodb.storage.heapfile Description</h2>
<div class="block"><p>
    This package provides an implementation of the heap file organization for
    NanoDB.  All heap files in nanodb are accessed by pages, as is the case
    with virtually all NanoDB files.  Following is a description of the
    storage format for heap files:
</p>

<h2>Overview</h2>

<p>
    Page 0 is the header page, containing the table's schema and statistics
    information.  All other pages are data pages, storing tuples using a
    slotted-page structure in each page.  Relevant classes are:
</p>

<ul>
    <li>
        The <code>edu.caltech.nanodb.storage.heapfile.HeapFileTableManager</code>
        class implements higher-level operations such as storing a table's
        schema into a table file.  It also manages the process of scanning
        through a table file, and inserting/deleting/modifying tuples.
    </li>
    <li>
        The <a href="../../../../../edu/caltech/nanodb/storage/heapfile/HeaderPage.html" title="class in edu.caltech.nanodb.storage.heapfile"><code>HeaderPage</code></a> class
        provides lower-level access to values stored in the header page, as
        well as constants for accessing various parts of the header page.
    </li>
    <li>
        Similarly, the <a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html" title="class in edu.caltech.nanodb.storage.heapfile"><code>DataPage</code></a>
        class provides lower-level access to values stored in the header page,
        as well as constants for accessing various parts of the header page.
    </li>
    <li>
        The <a href="../../../../../edu/caltech/nanodb/storage/heapfile/HeapFilePageTuple.html" title="class in edu.caltech.nanodb.storage.heapfile"><code>HeapFilePageTuple</code></a>
        class implements the <a href="../../../../../edu/caltech/nanodb/relations/Tuple.html" title="interface in edu.caltech.nanodb.relations"><code>Tuple</code></a>
        interface for access and manipulation of tuple data stored in the
        slotted page format.
    </li>
</ul>

<h2>The Header Page</h2>

<p>The header page has the following structural layout:</p>

<table>
    <tr><th>Offset in Page</th><th>Type</th><th>Description</th></tr>
    <tr>
        <td>0</td>
        <td>unsigned byte</td>
        <td>
            <b>File type</b>, set to <code>edu.caltech.nanodb.storage.DBFileType#HEAP_DATA_FILE</code>.
            (See the <a href="../../../../../edu/caltech/nanodb/storage/FileManagerImpl.html" title="class in edu.caltech.nanodb.storage"><code>FileManagerImpl</code></a> for code
            that accesses and manipulates this value.)
        </td>

        <td>1</td>
        <td>unsigned byte</td>
        <td>
            Encoded page size <em>p</em>, where the actual page size is
            2<sup>p</sup>.
            (See the <a href="../../../../../edu/caltech/nanodb/storage/FileManagerImpl.html" title="class in edu.caltech.nanodb.storage"><code>FileManagerImpl</code></a> for code
            that accesses and manipulates this value.)
        </td>

        <td>2 (<a href="../../../../../edu/caltech/nanodb/storage/heapfile/HeaderPage.html#OFFSET_SCHEMA_SIZE"><code>HeaderPage.OFFSET_SCHEMA_SIZE</code></a>)</td>
        <td>unsigned short</td>
        <td>
            <p>
            The number of bytes in the header page occupied by the table
            schema.  This value should not be 0, although the API allows it
            to be.
            </p>
            <p>
            (See <a href="../../../../../edu/caltech/nanodb/storage/heapfile/HeaderPage.html#getSchemaSize-edu.caltech.nanodb.storage.DBPage-"><code>HeaderPage.getSchemaSize(edu.caltech.nanodb.storage.DBPage)</code></a>
            and <a href="../../../../../edu/caltech/nanodb/storage/heapfile/HeaderPage.html#setSchemaSize-edu.caltech.nanodb.storage.DBPage-int-"><code>HeaderPage.setSchemaSize(edu.caltech.nanodb.storage.DBPage, int)</code></a>
            for accessing and manipulating this value.)
            </p>
        </td>

        <td>4 (<a href="../../../../../edu/caltech/nanodb/storage/heapfile/HeaderPage.html#OFFSET_STATS_SIZE"><code>HeaderPage.OFFSET_STATS_SIZE</code></a>)</td>
        <td>unsigned short</td>
        <td>
            <p>
            The number of bytes in the header page occupied by table statistics.
            This value may be 0 if the table currently has no statistics.
            </p>
            <p>
            (See <a href="../../../../../edu/caltech/nanodb/storage/heapfile/HeaderPage.html#getStatsSize-edu.caltech.nanodb.storage.DBPage-"><code>HeaderPage.getStatsSize(edu.caltech.nanodb.storage.DBPage)</code></a>
            and <a href="../../../../../edu/caltech/nanodb/storage/heapfile/HeaderPage.html#setStatsSize-edu.caltech.nanodb.storage.DBPage-int-"><code>HeaderPage.setStatsSize(edu.caltech.nanodb.storage.DBPage, int)</code></a>
            for accessing and manipulating this value.)
            </p>
        </td>

        <td>6 (<a href="../../../../../edu/caltech/nanodb/storage/heapfile/HeaderPage.html#OFFSET_SCHEMA_START"><code>HeaderPage.OFFSET_SCHEMA_START</code></a>)</td>
        <td><em>[table schema]</em></td>
        <td>
            The schema of the table, as written by the
            <a href="../../../../../edu/caltech/nanodb/storage/SchemaWriter.html" title="class in edu.caltech.nanodb.storage"><code>SchemaWriter</code></a> helper class.
        </td>

        <td><em>[after table schema]</em></td>
        <td><em>[table statistics]</em></td>
        <td>
            The table's statistics, as written by the
            <a href="../../../../../edu/caltech/nanodb/storage/StatsWriter.html" title="class in edu.caltech.nanodb.storage"><code>StatsWriter</code></a> helper class.
        </td>
    </tr>

</table></div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../edu/caltech/nanodb/storage/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../../../edu/caltech/nanodb/storage/writeahead/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?edu/caltech/nanodb/storage/heapfile/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
