<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_111) on Wed Jan 18 13:25:14 PST 2017 -->
<title>DataPage (NanoDB)</title>
<meta name="date" content="2017-01-18">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DataPage (NanoDB)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":9,"i2":9,"i3":9,"i4":9,"i5":9,"i6":9,"i7":9,"i8":9,"i9":9,"i10":9,"i11":9,"i12":9,"i13":9,"i14":9,"i15":9,"i16":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../edu/caltech/nanodb/storage/heapfile/HeaderPage.html" title="class in edu.caltech.nanodb.storage.heapfile"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?edu/caltech/nanodb/storage/heapfile/DataPage.html" target="_top">Frames</a></li>
<li><a href="DataPage.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">edu.caltech.nanodb.storage.heapfile</div>
<h2 title="Class DataPage" class="title">Class DataPage</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>edu.caltech.nanodb.storage.heapfile.DataPage</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <a href="../../../../../src-html/edu/caltech/nanodb/storage/heapfile/DataPage.html#line.25">DataPage</a>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">This class provides the constants and operations necessary for manipulating
 a data page within a heap file.  Heap files use a slotted-page structure
 where tuple-data is filled from the end of the page forward, so for two slots
 at indexes <em>i</em> and <em>j</em>, where <em>i</em> &lt; <em>j</em>, the
 start of <em>i</em>'s tuple data will be <u>after</u> <em>j</em>'s tuple
 data.</div>
<dl>
<dt><span class="simpleTagLabel">Design note:</span></dt>
<dd>(Donnie) Why is this class a static class, instead of a wrapper class
         around the <a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage"><code>DBPage</code></a>?  No particular reason, really.  The class
         is used relatively briefly when a table is being accessed, and there
         is no real need for it to manage its own object-state, so it was just
         as convenient to provide all functionality as static methods.  This
         avoids the (small) overhead of instantiating an object as well.  But
         really, these are not particularly strong reasons.</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#EMPTY_SLOT">EMPTY_SLOT</a></span></code>
<div class="block">This offset-value is stored into a slot when it is empty.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static <a href="http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/Logger.html?is-external=true" title="class or interface in org.apache.log4j">Logger</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#logger">logger</a></span></code>
<div class="block">A logging object for reporting anything interesting that happens.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#OFFSET_NUM_SLOTS">OFFSET_NUM_SLOTS</a></span></code>
<div class="block">The offset in the data page where the number of slots in the slot table
 is stored.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#DataPage--">DataPage</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#allocNewTuple-edu.caltech.nanodb.storage.DBPage-int-">allocNewTuple</a></span>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage,
             int&nbsp;len)</code>
<div class="block">Update the data page so that it has space for a new tuple of the
 specified size.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#deleteTuple-edu.caltech.nanodb.storage.DBPage-int-">deleteTuple</a></span>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage,
           int&nbsp;slot)</code>
<div class="block">Deletes the tuple at the specified slot from the data page.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#deleteTupleDataRange-edu.caltech.nanodb.storage.DBPage-int-int-">deleteTupleDataRange</a></span>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage,
                    int&nbsp;off,
                    int&nbsp;len)</code>
<div class="block">This static helper function removes a sequence of bytes from the current
 tuple data in the page, sliding tuple data below the offset forward to
 fill in the gap.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#getFreeSpaceInPage-edu.caltech.nanodb.storage.DBPage-">getFreeSpaceInPage</a></span>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage)</code>
<div class="block">This static helper function returns the amount of free space in
 a tuple data page.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#getNumSlots-edu.caltech.nanodb.storage.DBPage-">getNumSlots</a></span>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage)</code>
<div class="block">Returns the number of slots in this data page.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#getSlotIndexFromOffset-edu.caltech.nanodb.storage.DBPage-int-">getSlotIndexFromOffset</a></span>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage,
                      int&nbsp;offset)</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#getSlotOffset-int-">getSlotOffset</a></span>(int&nbsp;slot)</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#getSlotsEndIndex-edu.caltech.nanodb.storage.DBPage-">getSlotsEndIndex</a></span>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage)</code>
<div class="block">This static helper function returns the index where the slot list ends in
 the data page.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#getSlotValue-edu.caltech.nanodb.storage.DBPage-int-">getSlotValue</a></span>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage,
            int&nbsp;slot)</code>
<div class="block">This static helper function returns the value stored in the specified
 slot.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#getTupleDataEnd-edu.caltech.nanodb.storage.DBPage-">getTupleDataEnd</a></span>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage)</code>
<div class="block">This static helper function returns the index of where tuple data
 currently ends in the specified data page.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#getTupleDataStart-edu.caltech.nanodb.storage.DBPage-">getTupleDataStart</a></span>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage)</code>
<div class="block">This static helper function returns the index of where tuple data
 currently starts in the specified data page.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#getTupleLength-edu.caltech.nanodb.storage.DBPage-int-">getTupleLength</a></span>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage,
              int&nbsp;slot)</code>
<div class="block">Returns the length of the tuple stored at the specified slot.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#initNewPage-edu.caltech.nanodb.storage.DBPage-">initNewPage</a></span>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage)</code>
<div class="block">Initialize a newly allocated data page.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#insertTupleDataRange-edu.caltech.nanodb.storage.DBPage-int-int-">insertTupleDataRange</a></span>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage,
                    int&nbsp;off,
                    int&nbsp;len)</code>
<div class="block">
 This static helper function creates a space in the data page of the
 specified size, sliding tuple data below the offset down to
 create a gap.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#sanityCheck-edu.caltech.nanodb.storage.DBPage-">sanityCheck</a></span>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage)</code>
<div class="block">This static helper method verifies that the specified data page has
 proper structure and organization by performing various sanity checks.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#setNumSlots-edu.caltech.nanodb.storage.DBPage-int-">setNumSlots</a></span>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage,
           int&nbsp;numSlots)</code>
<div class="block">Sets the number of slots in this data page.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#setSlotValue-edu.caltech.nanodb.storage.DBPage-int-int-">setSlotValue</a></span>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage,
            int&nbsp;slot,
            int&nbsp;value)</code>
<div class="block">This static helper function sets the value for the specified slot.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="logger">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logger</h4>
<pre>private static&nbsp;<a href="http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/Logger.html?is-external=true" title="class or interface in org.apache.log4j">Logger</a> <a href="../../../../../src-html/edu/caltech/nanodb/storage/heapfile/DataPage.html#line.27">logger</a></pre>
<div class="block">A logging object for reporting anything interesting that happens.</div>
</li>
</ul>
<a name="OFFSET_NUM_SLOTS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>OFFSET_NUM_SLOTS</h4>
<pre>public static final&nbsp;int <a href="../../../../../src-html/edu/caltech/nanodb/storage/heapfile/DataPage.html#line.34">OFFSET_NUM_SLOTS</a></pre>
<div class="block">The offset in the data page where the number of slots in the slot table
 is stored.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#edu.caltech.nanodb.storage.heapfile.DataPage.OFFSET_NUM_SLOTS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="EMPTY_SLOT">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>EMPTY_SLOT</h4>
<pre>public static final&nbsp;int <a href="../../../../../src-html/edu/caltech/nanodb/storage/heapfile/DataPage.html#line.42">EMPTY_SLOT</a></pre>
<div class="block">This offset-value is stored into a slot when it is empty.  It is set to
 zero because this is where the page's slot-count is stored and therefore
 this is obviously an invalid offset for a tuple to be located at.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#edu.caltech.nanodb.storage.heapfile.DataPage.EMPTY_SLOT">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DataPage--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DataPage</h4>
<pre>public&nbsp;<a href="../../../../../src-html/edu/caltech/nanodb/storage/heapfile/DataPage.html#line.25">DataPage</a>()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="initNewPage-edu.caltech.nanodb.storage.DBPage-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initNewPage</h4>
<pre>public static&nbsp;void&nbsp;<a href="../../../../../src-html/edu/caltech/nanodb/storage/heapfile/DataPage.html#line.52">initNewPage</a>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage)</pre>
<div class="block">Initialize a newly allocated data page.  Currently this involves setting
 the number of slots to 0.  There is no other internal structure in data
 pages at this point.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dbPage</code> - the data page to initialize</dd>
</dl>
</li>
</ul>
<a name="getSlotOffset-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSlotOffset</h4>
<pre>public static&nbsp;int&nbsp;<a href="../../../../../src-html/edu/caltech/nanodb/storage/heapfile/DataPage.html#line.57">getSlotOffset</a>(int&nbsp;slot)</pre>
</li>
</ul>
<a name="getNumSlots-edu.caltech.nanodb.storage.DBPage-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumSlots</h4>
<pre>public static&nbsp;int&nbsp;<a href="../../../../../src-html/edu/caltech/nanodb/storage/heapfile/DataPage.html#line.70">getNumSlots</a>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage)</pre>
<div class="block">Returns the number of slots in this data page.  This can be considered
 to be the current "capacity" of the page, since any number of the slots
 could be set to <a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#EMPTY_SLOT"><code>EMPTY_SLOT</code></a> to indicate that they are empty.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dbPage</code> - the data page to retrieve the number of slots for</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the current number of slots in the page</dd>
</dl>
</li>
</ul>
<a name="setNumSlots-edu.caltech.nanodb.storage.DBPage-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setNumSlots</h4>
<pre>public static&nbsp;void&nbsp;<a href="../../../../../src-html/edu/caltech/nanodb/storage/heapfile/DataPage.html#line.85">setNumSlots</a>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage,
                               int&nbsp;numSlots)</pre>
<div class="block">Sets the number of slots in this data page.  Note that if the number of
 slots is increased, the new slots <em>must</em> be initialized to
 <a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#EMPTY_SLOT"><code>EMPTY_SLOT</code></a>, or else functions like <a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#getFreeSpaceInPage-edu.caltech.nanodb.storage.DBPage-"><code>getFreeSpaceInPage(edu.caltech.nanodb.storage.DBPage)</code></a>
 (which relies on the offset stored in the last slot) will produce wrong
 results.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dbPage</code> - the data page to set the number of slots for</dd>
<dd><code>numSlots</code> - the value to store</dd>
</dl>
</li>
</ul>
<a name="getSlotsEndIndex-edu.caltech.nanodb.storage.DBPage-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSlotsEndIndex</h4>
<pre>public static&nbsp;int&nbsp;<a href="../../../../../src-html/edu/caltech/nanodb/storage/heapfile/DataPage.html#line.98">getSlotsEndIndex</a>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage)</pre>
<div class="block">This static helper function returns the index where the slot list ends in
 the data page.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dbPage</code> - the data page to examine</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the index in the page data where the slot-table ends.  This also
         happens to be the size of the slot-table in bytes.</dd>
</dl>
</li>
</ul>
<a name="getSlotValue-edu.caltech.nanodb.storage.DBPage-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSlotValue</h4>
<pre>public static&nbsp;int&nbsp;<a href="../../../../../src-html/edu/caltech/nanodb/storage/heapfile/DataPage.html#line.119">getSlotValue</a>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage,
                               int&nbsp;slot)</pre>
<div class="block">This static helper function returns the value stored in the specified
 slot.  This will either be the offset of the start of a tuple in the data
 page, or it will be <a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#EMPTY_SLOT"><code>EMPTY_SLOT</code></a> if the slot is empty.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dbPage</code> - the data page to retrieve the slot-value from</dd>
<dd><code>slot</code> - the slot to retrieve the value for; valid values are from 0
        to <a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#getNumSlots-edu.caltech.nanodb.storage.DBPage-"><code>getNumSlots(edu.caltech.nanodb.storage.DBPage)</code></a> - 1.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the current value stored for the slot in the data page</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the specified slot number is outside
         the range [0, <a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#getNumSlots-edu.caltech.nanodb.storage.DBPage-"><code>getNumSlots(edu.caltech.nanodb.storage.DBPage)</code></a>).</dd>
</dl>
</li>
</ul>
<a name="setSlotValue-edu.caltech.nanodb.storage.DBPage-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSlotValue</h4>
<pre>public static&nbsp;void&nbsp;<a href="../../../../../src-html/edu/caltech/nanodb/storage/heapfile/DataPage.html#line.144">setSlotValue</a>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage,
                                int&nbsp;slot,
                                int&nbsp;value)</pre>
<div class="block">This static helper function sets the value for the specified slot.  This
 should either be the offset of the start of a tuple in the data
 page, or it should be <a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#EMPTY_SLOT"><code>EMPTY_SLOT</code></a> if the slot is empty.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dbPage</code> - the data page to set the slot-value for</dd>
<dd><code>slot</code> - the slot to set the value of; valid values are from 0 to
        <a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#getNumSlots-edu.caltech.nanodb.storage.DBPage-"><code>getNumSlots(edu.caltech.nanodb.storage.DBPage)</code></a> - 1.</dd>
<dd><code>value</code> - the value to store for the slot</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the specified slot number is outside
         the range [0, <a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#getNumSlots-edu.caltech.nanodb.storage.DBPage-"><code>getNumSlots(edu.caltech.nanodb.storage.DBPage)</code></a>).</dd>
</dl>
</li>
</ul>
<a name="getSlotIndexFromOffset-edu.caltech.nanodb.storage.DBPage-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSlotIndexFromOffset</h4>
<pre>public static&nbsp;int&nbsp;<a href="../../../../../src-html/edu/caltech/nanodb/storage/heapfile/DataPage.html#line.156">getSlotIndexFromOffset</a>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage,
                                         int&nbsp;offset)
                                  throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code></dd>
</dl>
</li>
</ul>
<a name="getTupleDataStart-edu.caltech.nanodb.storage.DBPage-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTupleDataStart</h4>
<pre>public static&nbsp;int&nbsp;<a href="../../../../../src-html/edu/caltech/nanodb/storage/heapfile/DataPage.html#line.190">getTupleDataStart</a>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage)</pre>
<div class="block">This static helper function returns the index of where tuple data
 currently starts in the specified data page.  This method uses the last
 slot in the slot-table to determine where the tuple data begins, since
 the slots must be organized in decreasing order of offset-value.  (In
 other words, we add tuple data from the back of the block towards the
 front.)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dbPage</code> - the data page to examine</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the index where the tuple data starts in this data page</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#setNumSlots-edu.caltech.nanodb.storage.DBPage-int-"><code>setNumSlots(edu.caltech.nanodb.storage.DBPage, int)</code></a></dd>
</dl>
</li>
</ul>
<a name="getTupleDataEnd-edu.caltech.nanodb.storage.DBPage-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTupleDataEnd</h4>
<pre>public static&nbsp;int&nbsp;<a href="../../../../../src-html/edu/caltech/nanodb/storage/heapfile/DataPage.html#line.222">getTupleDataEnd</a>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage)</pre>
<div class="block">This static helper function returns the index of where tuple data
 currently ends in the specified data page.  This value depends more on
 the overall structure of the data page, and at present is simply the
 page-size.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dbPage</code> - the data page to examine</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the index where the tuple data ends in this data page</dd>
</dl>
</li>
</ul>
<a name="getTupleLength-edu.caltech.nanodb.storage.DBPage-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTupleLength</h4>
<pre>public static&nbsp;int&nbsp;<a href="../../../../../src-html/edu/caltech/nanodb/storage/heapfile/DataPage.html#line.238">getTupleLength</a>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage,
                                 int&nbsp;slot)</pre>
<div class="block">Returns the length of the tuple stored at the specified slot.  It is
 invalid to use this method on an empty slot.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dbPage</code> - the data page being examined</dd>
<dd><code>slot</code> - the slot of the tuple to retrieve the length of</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the length of the tuple's data stored in this slot</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the specified slot is invalid, or if
         the specified slot has <a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#EMPTY_SLOT"><code>EMPTY_SLOT</code></a> for its value</dd>
</dl>
</li>
</ul>
<a name="getFreeSpaceInPage-edu.caltech.nanodb.storage.DBPage-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFreeSpaceInPage</h4>
<pre>public static&nbsp;int&nbsp;<a href="../../../../../src-html/edu/caltech/nanodb/storage/heapfile/DataPage.html#line.284">getFreeSpaceInPage</a>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage)</pre>
<div class="block">This static helper function returns the amount of free space in
 a tuple data page.  It simply uses other methods in this class to
 perform the simple computation.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dbPage</code> - the data page to examine</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the amount of free space in the data page, in bytes</dd>
</dl>
</li>
</ul>
<a name="sanityCheck-edu.caltech.nanodb.storage.DBPage-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sanityCheck</h4>
<pre>public static&nbsp;void&nbsp;<a href="../../../../../src-html/edu/caltech/nanodb/storage/heapfile/DataPage.html#line.300">sanityCheck</a>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage)</pre>
<div class="block">This static helper method verifies that the specified data page has
 proper structure and organization by performing various sanity checks.
 Currently, the only sanity check it performs is to verify that
 slot-offsets do indeed decrease monotonically as the slot-index
 increases.
 <p>
 Any issues will cause warnings to be logged.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dbPage</code> - the data page to check</dd>
</dl>
</li>
</ul>
<a name="insertTupleDataRange-edu.caltech.nanodb.storage.DBPage-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertTupleDataRange</h4>
<pre>public static&nbsp;void&nbsp;<a href="../../../../../src-html/edu/caltech/nanodb/storage/heapfile/DataPage.html#line.356">insertTupleDataRange</a>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage,
                                        int&nbsp;off,
                                        int&nbsp;len)</pre>
<div class="block"><p>
 This static helper function creates a space in the data page of the
 specified size, sliding tuple data below the offset down to
 create a gap.  Because tuples below the specified offset will actually
 move, some of the slots in the page may also need to be modified.
 </p>
 <p>The new space is initialized to all zero values.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dbPage</code> - The table data-page to insert space into.</dd>
<dd><code>off</code> - The offset in the page where the space will be added.</dd>
<dd><code>len</code> - The number of bytes to insert.</dd>
</dl>
</li>
</ul>
<a name="deleteTupleDataRange-edu.caltech.nanodb.storage.DBPage-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteTupleDataRange</h4>
<pre>public static&nbsp;void&nbsp;<a href="../../../../../src-html/edu/caltech/nanodb/storage/heapfile/DataPage.html#line.417">deleteTupleDataRange</a>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage,
                                        int&nbsp;off,
                                        int&nbsp;len)</pre>
<div class="block">This static helper function removes a sequence of bytes from the current
 tuple data in the page, sliding tuple data below the offset forward to
 fill in the gap.  Because tuples below the specified offset will actually
 move, some of the slots in the page may also need to be modified.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dbPage</code> - The table data-page to insert space into.</dd>
<dd><code>off</code> - The offset in the page where the space will be removed.</dd>
<dd><code>len</code> - The number of bytes to remove.</dd>
</dl>
</li>
</ul>
<a name="allocNewTuple-edu.caltech.nanodb.storage.DBPage-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocNewTuple</h4>
<pre>public static&nbsp;int&nbsp;<a href="../../../../../src-html/edu/caltech/nanodb/storage/heapfile/DataPage.html#line.479">allocNewTuple</a>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage,
                                int&nbsp;len)</pre>
<div class="block">Update the data page so that it has space for a new tuple of the
 specified size.  The new tuple is assigned a slot (whose index is
 returned by this method), and the space for the tuple is initialized
 to all zero values.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dbPage</code> - The data page to store the new tuple in.</dd>
<dd><code>len</code> - The length of the new tuple's data.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The slot-index for the new tuple.  The offset to the start
         of the requested space is available via that slot.  (Use
         <a href="../../../../../edu/caltech/nanodb/storage/heapfile/DataPage.html#getSlotValue-edu.caltech.nanodb.storage.DBPage-int-"><code>getSlotValue(edu.caltech.nanodb.storage.DBPage, int)</code></a> to retrieve that offset.)</dd>
</dl>
</li>
</ul>
<a name="deleteTuple-edu.caltech.nanodb.storage.DBPage-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>deleteTuple</h4>
<pre>public static&nbsp;void&nbsp;<a href="../../../../../src-html/edu/caltech/nanodb/storage/heapfile/DataPage.html#line.586">deleteTuple</a>(<a href="../../../../../edu/caltech/nanodb/storage/DBPage.html" title="class in edu.caltech.nanodb.storage">DBPage</a>&nbsp;dbPage,
                               int&nbsp;slot)</pre>
<div class="block">Deletes the tuple at the specified slot from the data page.  The space
 occupied by the tuple's data is reclaimed by sliding tuple-data lower
 in the page upward.  Also, any trailing slots that are now marked as
 "deleted" are reclaimed.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dbPage</code> - the data page to remove the tuple from</dd>
<dd><code>slot</code> - the slot of the tuple to delete</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../edu/caltech/nanodb/storage/heapfile/HeaderPage.html" title="class in edu.caltech.nanodb.storage.heapfile"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?edu/caltech/nanodb/storage/heapfile/DataPage.html" target="_top">Frames</a></li>
<li><a href="DataPage.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
